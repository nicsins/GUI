<html>
<head>
<title>weatherstaion.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080; font-style: italic;}
.s1 { color: #000000;}
.s2 { color: #000080; font-weight: bold;}
.s3 { color: #008080; font-weight: bold;}
.s4 { color: #0000ff;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
weatherstaion.py</font>
</center></td></tr></table>
<pre><span class="s0"># import all functions from the tkinter</span>
<span class="s2">from </span>tkinter <span class="s2">import </span>*
<span class="s2">from </span>tkinter <span class="s2">import </span>messagebox
<span class="s2">import </span>requests
<span class="s2">import </span>json


<span class="s0"># function to find weather details</span>
# of any city using openweathermap api
<span class="s2">def </span>tell_weather():
    <span class="s0"># import required modules</span>
    <span class="s2">import </span>requests, json

    <span class="s0"># enter your api key here</span>
    api_key = <span class="s3">&quot;Your_API_key&quot;</span>

    <span class="s0"># base_url variable to store url</span>
    base_url = <span class="s3">&quot;http://api.openweathermap.org/data/2.5/weather?&quot;</span>

    <span class="s0"># take a city name from city_field entry box</span>
    city_name = city_field.get()

    <span class="s0"># complete_url variable to store complete url address</span>
    complete_url = base_url + <span class="s3">&quot;appid =&quot; </span>+ api_key
    + <span class="s3">&quot;&amp;q =&quot; </span>+ city_name


<span class="s0"># get method of requests module</span>
# return response object
response = requests.get(complete_url)

<span class="s0"># json method of response object convert</span>
# json format data into python format data
x = response.json()

<span class="s0"># now x contains list of nested dictionaries</span>
# we know dictionary contains key value pair
# check the value of &quot;cod&quot; key is equal to &quot;404&quot;
# or not if not that means city is found
# otherwise city is not found
<span class="s2">if </span>x[<span class="s3">&quot;cod&quot;</span>] != <span class="s3">&quot;404&quot;</span>:

    <span class="s0"># store the value of &quot;main&quot; key in variable y</span>
    y = x[<span class="s3">&quot;main&quot;</span>]

    <span class="s0"># store the value corresponding to the &quot;temp&quot; key of y</span>
    current_temperature = y[<span class="s3">&quot;temp&quot;</span>]

    <span class="s0"># store the value corresponding to the &quot;pressure&quot; key of y</span>
    current_pressure = y[<span class="s3">&quot;pressure&quot;</span>]

    <span class="s0"># store the value corresponding to the &quot;humidity&quot; key of y</span>
    current_humidiy = y[<span class="s3">&quot;humidity&quot;</span>]

    <span class="s0"># store the value of &quot;weather&quot; key in variable z</span>
    z = x[<span class="s3">&quot;weather&quot;</span>]

    <span class="s0"># store the value corresponding to the &quot;description&quot; key</span>
    # at the 0th index of z
    weather_description = z[<span class="s4">0</span>][<span class="s3">&quot;description&quot;</span>]

    <span class="s0"># insert method inserting the</span>
    # value in the text entry box.
    temp_field.insert(<span class="s4">15</span>, str(current_temperature) + <span class="s3">&quot; Kelvin&quot;</span>)
    atm_field.insert(<span class="s4">10</span>, str(current_pressure) + <span class="s3">&quot; hPa&quot;</span>)
    humid_field.insert(<span class="s4">15</span>, str(current_humidiy) + <span class="s3">&quot; %&quot;</span>)
    desc_field.insert(<span class="s4">10</span>, str(weather_description))

<span class="s0"># if city is not found</span>
<span class="s2">else</span>:

    <span class="s0"># message dialog box appear which</span>
    # shows given Error meassgae
    messagebox.showerror(<span class="s3">&quot;Error&quot;</span>, <span class="s3">&quot;City Not Found </span><span class="s2">\n</span><span class="s3">&quot;</span>
                                  &quot;Please enter valid city name&quot;)

    <span class="s0"># clear the content of city_field entry box</span>
    city_field.delete(<span class="s4">0</span>, END)


<span class="s0"># Function for clearing the</span>
# contents of all text entry boxes
<span class="s2">def </span>clear_all():
    city_field.delete(<span class="s4">0</span>, END)
    temp_field.delete(<span class="s4">0</span>, END)
    atm_field.delete(<span class="s4">0</span>, END)
    humid_field.delete(<span class="s4">0</span>, END)
    desc_field.delete(<span class="s4">0</span>, END)

    <span class="s0"># set focus on the city_field entry box</span>
    city_field.focus_set()


<span class="s0"># Driver code</span>
<span class="s2">if </span>__name__ == <span class="s3">&quot;__main__&quot;</span>:
    <span class="s0"># Create a GUI window</span>
    root = Tk()

    <span class="s0"># set the name of tkinter GUI window</span>
    root.title(<span class="s3">&quot;Gui Application&quot;</span>)

    <span class="s0"># Set the background colour of GUI window</span>
    root.configure(background=<span class="s3">&quot;light green&quot;</span>)

    <span class="s0"># Set the configuration of GUI window</span>
    root.geometry(<span class="s3">&quot;425x175&quot;</span>)

    <span class="s0"># Create a Weather Gui Application label</span>
    headlabel = Label(root, text=<span class="s3">&quot;Weather Gui Application&quot;</span>,
                      fg=<span class="s3">'black'</span>, bg=<span class="s3">'red'</span>)

    <span class="s0"># Create a City name : label</span>
    label1 = Label(root, text=<span class="s3">&quot;City name : &quot;</span>,
                   fg=<span class="s3">'black'</span>, bg=<span class="s3">'dark green'</span>)

    <span class="s0"># Create a City name : label</span>
    label2 = Label(root, text=<span class="s3">&quot;Temperature :&quot;</span>,
                   fg=<span class="s3">'black'</span>, bg=<span class="s3">'dark green'</span>)

    <span class="s0"># Create a atm pressure : label</span>
    label3 = Label(root, text=<span class="s3">&quot;atm pressure :&quot;</span>,
                   fg=<span class="s3">'black'</span>, bg=<span class="s3">'dark green'</span>)

    <span class="s0"># Create a humidity : label</span>
    label4 = Label(root, text=<span class="s3">&quot;humidity :&quot;</span>,
                   fg=<span class="s3">'black'</span>, bg=<span class="s3">'dark green'</span>)

    <span class="s0"># Create a description :label</span>
    label5 = Label(root, text=<span class="s3">&quot;description :&quot;</span>,
                   fg=<span class="s3">'black'</span>, bg=<span class="s3">'dark green'</span>)

    <span class="s0"># grid method is used for placing</span>
    # the widgets at respective positions
    # in table like structure .
    headlabel.grid(row=<span class="s4">0</span>, column=<span class="s4">1</span>)
    label1.grid(row=<span class="s4">1</span>, column=<span class="s4">0</span>, sticky=<span class="s3">&quot;E&quot;</span>)
    label2.grid(row=<span class="s4">3</span>, column=<span class="s4">0</span>, sticky=<span class="s3">&quot;E&quot;</span>)
    label3.grid(row=<span class="s4">4</span>, column=<span class="s4">0</span>, sticky=<span class="s3">&quot;E&quot;</span>)
    label4.grid(row=<span class="s4">5</span>, column=<span class="s4">0</span>, sticky=<span class="s3">&quot;E&quot;</span>)
    label5.grid(row=<span class="s4">6</span>, column=<span class="s4">0</span>, sticky=<span class="s3">&quot;E&quot;</span>)

    <span class="s0"># Create a text entry box</span>
    # for filling or typing the information.
    city_field = Entry(root)
    temp_field = Entry(root)
    atm_field = Entry(root)
    humid_field = Entry(root)
    desc_field = Entry(root)

    <span class="s0"># grid method is used for placing</span>
    # the widgets at respective positions
    # in table like structure .
    # ipadx keyword argument set width of entry space .
    city_field.grid(row=<span class="s4">1</span>, column=<span class="s4">1</span>, ipadx=<span class="s3">&quot;100&quot;</span>)
    temp_field.grid(row=<span class="s4">3</span>, column=<span class="s4">1</span>, ipadx=<span class="s3">&quot;100&quot;</span>)
    atm_field.grid(row=<span class="s4">4</span>, column=<span class="s4">1</span>, ipadx=<span class="s3">&quot;100&quot;</span>)
    humid_field.grid(row=<span class="s4">5</span>, column=<span class="s4">1</span>, ipadx=<span class="s3">&quot;100&quot;</span>)
    desc_field.grid(row=<span class="s4">6</span>, column=<span class="s4">1</span>, ipadx=<span class="s3">&quot;100&quot;</span>)

    <span class="s0"># Create a Submit Button and attached</span>
    # to tell_weather function
    button1 = Button(root, text=<span class="s3">&quot;Submit&quot;</span>, bg=<span class="s3">&quot;red&quot;</span>,
                     fg=<span class="s3">&quot;black&quot;</span>, command=tell_weather)

    <span class="s0"># Create a Clear Button and attached</span>
    # to clear_all function
    button2 = Button(root, text=<span class="s3">&quot;Clear&quot;</span>, bg=<span class="s3">&quot;red&quot;</span>,
                     fg=<span class="s3">&quot;black&quot;</span>, command=clear_all)

    <span class="s0"># grid method is used for placing</span>
    # the widgets at respective positions
    # in table like structure .
    button1.grid(row=<span class="s4">2</span>, column=<span class="s4">1</span>)
    button2.grid(row=<span class="s4">7</span>, column=<span class="s4">1</span>)

    <span class="s0"># Start the GUI</span>
    root.mainloop()
</pre>
</body>
</html>